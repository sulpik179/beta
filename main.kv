
#:import ThemeButton gui.widgets.theme_button.ThemeButton

<LanguageSelectPopup>:
    title: ""                        
    separator_height: 0              
    background_color: 0, 0, 0, 0     
    background: ""                   
    size_hint: 0.6, 0.25
    auto_dismiss: False
    BoxLayout:
        orientation: "vertical"
        padding: ("50dp", "50dp")
        spacing: "10dp"
        Button:
            text: "en - ru"
            font_name: "JetBrainsMono"
            font_size: "25sp"
            size_hint_y: None
            background_color: 0.62, 0.71, 0.75, 1
            border_color: 0, 0, 0, 0
            height: "55dp"
            on_press: root.set_language("en_ru")
        Button:
            text: "ru - en"
            font_name: "JetBrainsMono"
            font_size: "25sp"
            size_hint_y: None
            background_color: 0.62, 0.71, 0.75, 1
            border_color: 0, 0, 0, 0
            height: "55dp"
            on_press: root.set_language("ru_en")
        

<MainScreen>:
    name: "main"
    FloatLayout:

        Button:
            size_hint: None, None
            size: "40dp", "40dp"
            pos_hint: {"x": 0.02, "top": 0.98}
            background_normal: ""
            background_down: ""
            font_name: "JetBrainsMono"
            background_color: (0.05, 0.06, 0.07, 1) if app.is_dark_theme else (0.90, 0.93, 0.96, 1)
            color: (0.90, 0.93, 0.96, 1) if app.is_dark_theme else (0.05, 0.06, 0.07, 1)
            text: "O" if app.is_dark_theme else "X"
            font_size: "20sp"
            on_press: app.toggle_theme()

        BoxLayout:
            orientation: "vertical"
            padding: ("20dp", "40dp")
            spacing: "20dp"
            size_hint: 0.9, 0.8
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

            Label:
                text: "Welcome to Beta"
                font_size: "32sp"
                font_name: "JetBrainsMono"
                size_hint_y: None
                height: "50dp"
                halign: "center"
                valign: "middle"
                color: (0.90, 0.93, 0.96, 1) if app.is_dark_theme else (0.05, 0.06, 0.07, 1)

            Button:
                text: "Learn"
                font_name: "JetBrainsMono"
                font_size: "24sp"
                size_hint_y: None
                height: "65dp"
                background_color: 0.62, 0.71, 0.75, 1
                color: (0.90, 0.93, 0.96, 1) 
                on_press: app.root.current = "learn"

            Button:
                text: "Practice"
                font_name: "JetBrainsMono"
                font_size: "24sp"
                size_hint_y: None
                height: "65dp"
                background_color: 0.62, 0.71, 0.75, 1
                color: (0.90, 0.93, 0.96, 1) 
                on_press: app.root.current = "practice"

            Button:
                text: "Dictionary"
                font_name: "JetBrainsMono"
                font_size: "24sp"
                size_hint_y: None
                height: "65dp"
                background_color: 0.62, 0.71, 0.75, 1
                color: (0.90, 0.93, 0.96, 1) 
                on_press: app.root.current = "dictionary"

<LearnScreen>:
    name: "learn"
    BoxLayout:
        orientation: "vertical"
        padding: ("20dp", "20dp")
        spacing: "15dp"

        Label:
            id: word_label
            text: "Wait for you"
            font_size: "30sp"
            font_name: "JetBrainsMono"
            color: 0.12, 0.13, 0.13, 1
            size_hint_y: None
            height: "55dp"
            halign: "center"
            valign: "middle"

        Label:
            id: transcription_label
            text: ":)"
            font_size: "20sp"
            font_name: "DejaVuSans"
            color: 0.12, 0.13, 0.13, 1
            size_hint_y: None
            height: "30dp"
            halign: "center"
            valign: "middle"

        Label:
            id: sentence_label
            text: " "
            font_size: "18sp"
            font_name: "JetBrainsMono"
            color: 0.12, 0.13, 0.13, 1
            size_hint_y: None
            height: "65dp"
            text_size: self.width, None
            halign: "center"
            valign: "middle"

        BoxLayout:
            orientation: "vertical"
            spacing: "12dp"
            size_hint_y: None
            height: "180dp"
            AnswerButton:
                id: option1
                text: " "
                size_hint_y: None
                height: "55dp"
                font_name: "JetBrainsMono"
                font_size: "20sp"
                background_color: 0.62, 0.71, 0.75, 1
                padding: ("15dp", "10dp")
                border_color: 0, 0, 0, 0
                on_press: root.check_answer(self.text)
            AnswerButton:
                id: option2
                text: " "
                size_hint_y: None
                height: "55dp"
                font_name: "JetBrainsMono"
                font_size: "20sp"
                background_color: 0.62, 0.71, 0.75, 1
                padding: ("15dp", "10dp")
                border_color: 0, 0, 0, 0
                on_press: root.check_answer(self.text)
            AnswerButton:
                id: option3
                text: " "
                size_hint_y: None
                height: "55dp"
                font_name: "JetBrainsMono"
                font_size: "20sp"
                background_color: 0.62, 0.71, 0.75, 1
                padding: ("15dp", "10dp")
                border_color: 0, 0, 0, 0
                on_press: root.check_answer(self.text)

        BoxLayout:
            orientation: "horizontal"
            spacing: "15dp"
            size_hint_y: None
            height: "60dp"
            Button:
                text: "Main"
                font_name: "JetBrainsMono"
                font_size: "20sp"
                size_hint_y: None
                height: "60dp"
                background_color: 0.62, 0.71, 0.75, 1
                color: 0.90, 0.93, 0.96, 1
                on_press: app.root.current = "main"
            Button:
                id: next_button
                text: "Next"
                font_name: "JetBrainsMono"
                font_size: "20sp"
                size_hint_y: None
                height: "60dp"
                background_color: 0.62, 0.71, 0.75, 1
                color: 0.90, 0.93, 0.96, 1
                disabled: True
                opacity: 0
                on_press: root.next_word()

<PracticeScreen>:
    name: "practice"
    FloatLayout:

        Label:
            id: progress_label
            text: " "
            font_name: "JetBrainsMono"
            font_size: "16sp"
            size_hint: None, None
            size: self.texture_size
            pos_hint: {"right": 0.95, "top": 0.95}
            color: 0.36, 0.42, 0.45, 1
            halign: "right"
            valign: "top"

        BoxLayout:
            orientation: "vertical"
            padding: ("20dp", "20dp")
            spacing: "15dp"
            size_hint: 0.95, 0.85
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

            Label:
                id: word_label
                text: "Wait for you"
                font_size: "30sp"
                font_name: "JetBrainsMono"
                color: 0.12, 0.13, 0.13, 1
                size_hint_y: None
                height: "55dp"
                halign: "center"
                valign: "middle"

            Label:
                id: transcription_label
                text: ":)"
                font_size: "20sp"
                font_name: "DejaVuSans"
                color: 0.12, 0.13, 0.13, 1
                size_hint_y: None
                height: "30dp"
                halign: "center"
                valign: "middle"

            Label:
                id: sentence_label
                text: " "
                font_size: "18sp"
                font_name: "JetBrainsMono"
                color: 0.12, 0.13, 0.13, 1
                size_hint_y: None
                height: "65dp"
                text_size: self.width, None
                halign: "center"
                valign: "middle"

            BoxLayout:
                orientation: "vertical"
                spacing: "12dp"
                size_hint_y: None
                height: "180dp"
                AnswerButton:
                    id: option1
                    text: " "
                    size_hint_y: None
                    height: "55dp"
                    font_name: "JetBrainsMono"
                    font_size: "20sp"
                    padding: ("15dp", "10dp")
                    background_color: 0.62, 0.71, 0.75, 1
                    border_color: 0, 0, 0, 0
                    on_press: root.check_answer(self.text)
                AnswerButton:
                    id: option2
                    text: " "
                    size_hint_y: None
                    height: "55dp"
                    font_name: "JetBrainsMono"
                    font_size: "20sp"
                    padding: ("15dp", "10dp")
                    background_color: 0.62, 0.71, 0.75, 1
                    border_color: 0, 0, 0, 0
                    on_press: root.check_answer(self.text)
                AnswerButton:
                    id: option3
                    text: " "
                    size_hint_y: None
                    height: "55dp"
                    font_name: "JetBrainsMono"
                    font_size: "20sp"
                    padding: ("15dp", "10dp")
                    background_color: 0.62, 0.71, 0.75, 1
                    border_color: 0, 0, 0, 0
                    on_press: root.check_answer(self.text)

            BoxLayout:
                orientation: "horizontal"
                spacing: "15dp"
                size_hint_y: None
                height: "60dp"
                Button:
                    text: "Main"
                    font_name: "JetBrainsMono"
                    font_size: "20sp"
                    size_hint_y: None
                    height: "60dp"
                    background_color: 0.62, 0.71, 0.75, 1
                    color: 0.90, 0.93, 0.96, 1
                    on_press: app.root.current = "main"
                Button:
                    id: next_button
                    text: "Next"
                    font_name: "JetBrainsMono"
                    font_size: "20sp"
                    size_hint_y: None
                    height: "60dp"
                    background_color: 0.62, 0.71, 0.75, 1
                    color: 0.90, 0.93, 0.96, 1
                    disabled: True
                    opacity: 0
                    on_press: root.next_word()

<DictionaryScreen>:
    name: "dictionary"
    BoxLayout:
        orientation: "vertical"
        padding: ("15dp", "15dp")
        spacing: "15dp"

        Button:
            text: "Main"
            font_name: "JetBrainsMono"
            font_size: "20sp"
            size_hint_y: None
            background_color: 0.62, 0.71, 0.75, 1
            color: 0.90, 0.93, 0.96, 1
            height: "60dp"
            on_press: app.root.current = "main"

        ScrollView:
            BoxLayout:
                id: dict_layout
                orientation: "vertical"
                size_hint_y: None
                height: self.minimum_height
                spacing: "12dp"

<DictionaryItem@BoxLayout>:
    orientation: "horizontal"
    size_hint_y: None
    height: "50dp"
    padding: ("10dp", 0)
    spacing: "15dp"

    Label:
        id: en_label
        font_name: "JetBrainsMono"
        font_size: "18sp"
        color: 0.12, 0.13, 0.13, 1
        halign: "left"
        valign: "middle"
        text_size: self.size

    Label:
        id: ru_label
        font_name: "DejaVuSans"
        font_size: "18sp"
        color: 0.12, 0.13, 0.13, 1
        halign: "right"
        valign: "middle"
        text_size: self.size


<FlashcardScreenManager>:
    MainScreen:
    LearnScreen:
    PracticeScreen:
    DictionaryScreen: